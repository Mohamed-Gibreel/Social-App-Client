(this["webpackJsonpsocialapp-client"]=this["webpackJsonpsocialapp-client"]||[]).push([[0],{107:function(e,t){},128:function(e,t,a){e.exports=a(183)},133:function(e,t,a){},183:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),l=a.n(o),i=a(33),c=a(11),s=(a(133),a(222)),m=a(77),u=a.n(m),p=a(103),d=a(28),h=a(40),g=a(106),f=a(16),E={authenticated:!1,loading:!1,credentials:{},likes:[],notifications:[]},b={loading:!1,errors:{}},v=a(107),y=a.n(v),O=[g.a],j=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),w=Object(h.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTHENTICATED":return Object(f.a)(Object(f.a)({},e),{},{authenticated:!0});case"SET_UNAUTHENTICATED":return E;case"SET_USER":return Object(f.a)(Object(f.a)({},t.payload),{},{authenticated:!0,loading:!1});case"LOADING_USER":return Object(f.a)(Object(f.a)({},e),{},{loading:!0});default:return e}},data:y.a,UI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERRORS":return Object(f.a)(Object(f.a)({},e),{},{loading:!1,errors:t.payload});case"CLEAR_ERRORS":return Object(f.a)(Object(f.a)({},e),{},{loading:!1,errors:{}});case"LOADING_UI":return Object(f.a)(Object(f.a)({},e),{},{loading:!0});default:return e}}}),I=Object(h.e)(w,{},Object(h.d)(h.a.apply(void 0,O),j)),N=a(27),x=a.n(N),S=function(){return function(e){e({type:"LOADING_USER"}),x.a.get("/user").then((function(t){e({type:"SET_USER",payload:t.data})})).catch((function(e){console.log(e)}))}},C=function(){return function(e){localStorage.removeItem("FBIdToken"),delete x.a.defaults.headers.common.Authorization,e({type:"SET_UNAUTHENTICATED"})}},T=function(e){var t="Bearer ".concat(e);localStorage.setItem("FBIdToken",t),x.a.defaults.headers.common={Authorization:t}},U=a(20),A=a(21),_=a(23),R=a(22),k=a(215),L=a(217),D=a(218),F=a(33).Link,P=function(e){Object(_.a)(a,e);var t=Object(R.a)(a);function a(){return Object(U.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"render",value:function(){return r.a.createElement(k.a,null,r.a.createElement(L.a,{className:"nav-container"},r.a.createElement(D.a,{color:"inherit",component:F,to:"/login"},"Log In"),r.a.createElement(D.a,{color:"inherit",component:F,to:"/homepage"},"Home"),r.a.createElement(D.a,{color:"inherit",component:F,to:"/signup"},"Sign Up")))}}]),a}(n.Component),B=a(116),W=Object(d.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var t=e.component,a=e.authenticated,n=Object(B.a)(e,["component","authenticated"]);return r.a.createElement(c.d,Object.assign({},n,{render:function(e){return!0===a?r.a.createElement(c.c,{to:"/homepage"}):r.a.createElement(t,e)}}))})),H=a(226),V=a(35),z=a.n(V),G=a(53),M=a.n(G),X=a(219),Y=a(221),J=a(220),q=a(187),K=a(33).Link,Q=a(160),Z=function(e){Object(_.a)(a,e);var t=Object(R.a)(a);function a(){return Object(U.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"render",value:function(){M.a.extend(Q);var e=this.props,t=e.classes,a=e.post,n=a.body,o=a.createdAt,l=a.userImage,i=a.userHandle;return r.a.createElement(X.a,{className:t.card},r.a.createElement(J.a,{image:l,title:"Profile Image",className:t.image}),r.a.createElement(Y.a,{className:t.content},r.a.createElement(q.a,{variant:"h5",component:K,to:"/users/".concat(i),color:"primary"},i),r.a.createElement(q.a,{variant:"body2",color:"textSecondary"},M()(o).fromNow()),r.a.createElement(q.a,{variant:"body1"},n)))}}]),a}(n.Component),$=z()({card:{display:"flex",marginBottom:20},image:{minWidth:200,objectFit:"cover"},content:{padding:25}})(Z),ee=a(117),te=a(225),ae=a(224),ne=a(230),re=a(113),oe=a.n(re),le=a(114),ie=a.n(le),ce=a(115),se=a.n(ce),me=a(112),ue=a.n(me),pe=a(33).Link,de=function(e){Object(_.a)(a,e);var t=Object(R.a)(a);function a(){var e;Object(U.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleImageChange=function(t){var a=t.target.files[0],n=new FormData;n.append("image",a,a.name),e.props.uploadImage(n)},e.handleEditPicture=function(){var e=document.getElementById("imageInput");console.log(e),e.click()},e}return Object(A.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.user,o=a.credentials,l=o.handle,i=o.createdAt,c=o.imageUrl,s=o.bio,m=o.website,u=o.location,p=a.loading,d=a.authenticated;return p?r.a.createElement("p",null,"Loading ..."):d?r.a.createElement(ee.a,{className:t.paper},r.a.createElement("div",{className:t.profile},r.a.createElement("div",{className:"image-wrapper"},r.a.createElement("hr",null),r.a.createElement("img",{src:c,alt:"Profile",className:"profile-image"}),r.a.createElement("input",{type:"file",id:"imageInput",onChange:this.handleImageChange,hidden:"hidden"}),r.a.createElement(ne.a,{title:"Edit Profile Image"},r.a.createElement(ae.a,{onClick:this.handleEditPicture,className:"button"},r.a.createElement(ue.a,{color:"primary"})))),r.a.createElement("hr",null),r.a.createElement("div",{className:"profile-details"},r.a.createElement(te.a,{component:pe,to:"/users/".concat(l),color:"primary",variant:"h5"},"@",l),r.a.createElement("hr",null),s&&r.a.createElement(n.Fragment,null,r.a.createElement(q.a,{varient:"body2"},s),r.a.createElement("hr",null)),u&&r.a.createElement(n.Fragment,null,r.a.createElement(oe.a,{color:"primary"})," ",r.a.createElement("span",null,u),r.a.createElement("hr",null)),m&&r.a.createElement(n.Fragment,null,r.a.createElement(ie.a,{color:"primary"}),r.a.createElement("a",{href:m,target:"_blank",rel:"noopener noreferrer"}," ",m.substring(m.indexOf(".")+1,m.lastIndexOf(".")).replace(m.charAt(12),m.charAt(12).toUpperCase())),r.a.createElement("hr",null)),r.a.createElement(se.a,{color:"primary"})," ",r.a.createElement("span",null,"Joined ",M()(i).format("MMM YYYY")),r.a.createElement("hr",null),r.a.createElement("hr",null)))):r.a.createElement("div",{className:t.profile},r.a.createElement(ee.a,{className:t.paper},r.a.createElement("hr",null),r.a.createElement(q.a,{variant:"body2",align:"center"},"No profile found. Please login again!"),r.a.createElement("div",{className:t.buttons},r.a.createElement(D.a,{variant:"contained",color:"primary",component:pe,to:"/login"},"Login"),r.a.createElement(D.a,{variant:"contained",color:"secondary",component:pe,to:"/signup"},"Sign Up"))))}}]),a}(n.Component),he={logoutUser:C,uploadImage:function(e){return function(t){t({type:"LOADING_USER"}),x.a.post("/user/profileImg",e).then((function(){t(S())})).catch((function(e){return console.log(e)}))}}},ge=Object(d.b)((function(e){return{user:e.user}}),he)(z()((function(e){return{profile:{paper:{padding:20},"& .image-wrapper":{textAlign:"center",position:"relative","& button":{position:"absolute",top:"80%",left:"70%"}},"& .profile-image":{width:200,height:200,objectFit:"cover",maxWidth:"100%",borderRadius:"50%"},"& .profile-details":{textAlign:"center","& span, svg":{verticalAlign:"middle"},"& a":{color:"#00bcd4"}},"& hr":{border:"none",margin:"0 0 10px 0"},"& svg.button":{"&:hover":{cursor:"pointer"}}},buttons:{textAlign:"center","& a":{margin:"20px 10px"}}}}))(de)),fe=function(e){Object(_.a)(a,e);var t=Object(R.a)(a);function a(){var e;Object(U.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={posts:null},e}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this;x.a.get("/posts").then((function(t){e.setState({posts:t.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.posts?this.state.posts.map((function(e){return r.a.createElement($,{key:e.postId,post:e})})):r.a.createElement("p",null,"Loading ...");return r.a.createElement(H.a,{container:!0,spacing:10},r.a.createElement(H.a,{item:!0,sm:8,xs:12},e),r.a.createElement(H.a,{item:!0,sm:4,xs:12},r.a.createElement(ge,null)))}}]),a}(n.Component),Ee=a(46),be=a(67),ve=a.n(be),ye=a(228),Oe=a(227),je=a(33).Link,we=function(e){Object(_.a)(a,e);var t=Object(R.a)(a);function a(){var e;return Object(U.a)(this,a),(e=t.call(this)).handleSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a,e.props.history)},e.handleChange=function(t){e.setState(Object(Ee.a)({},t.target.name,t.target.value))},e.state={email:"",password:"",errors:{}},e}return Object(A.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.UI.loading,n=this.state.errors;return r.a.createElement("div",{className:t.formContainer},r.a.createElement("img",{src:ve.a,alt:"AppIcon",className:t.appIcon}),r.a.createElement(q.a,{variant:"h2",className:t.pageTitle},"Login"),r.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit,className:t.form},r.a.createElement(ye.a,{id:"email",name:"email",type:"email",label:"Email",error:!!n.email,helperText:n.email,className:t.textField,value:this.state.email,onChange:this.handleChange,fullWidth:!0}),r.a.createElement(ye.a,{id:"password",name:"password",type:"password",label:"Password",className:t.textField,value:this.state.password,error:!!n.password,helperText:n.password,onChange:this.handleChange,fullWidth:!0}),n.general&&r.a.createElement(q.a,{className:t.customError},n.general),r.a.createElement(D.a,{type:"submit",variant:"contained",color:"primary",className:t.button,disabled:a},"Login",a&&r.a.createElement(Oe.a,{size:25,className:t.proress})),r.a.createElement("div",null,r.a.createElement("small",null,"Don't have an account ? Sign Up ",r.a.createElement(je,{to:"/signup"},"here")," !"))))}}],[{key:"getDerivedStateFromProps",value:function(e){if(e.UI.errors)return{errors:e.UI.errors}}}]),a}(n.Component),Ie={loginUser:function(e,t){return function(a){a({type:"LOADING_UI"}),x.a.post("/login",e).then((function(e){T(e.data.token),a({type:"CLEAR_ERRORS"}),a(S()),t.push("/homepage")})).catch((function(e){a({type:"SET_ERRORS",payload:e.response.data})}))}}},Ne=Object(d.b)((function(e){return{user:e.user,UI:e.UI}}),Ie)(z()((function(e){return Object(f.a)({},e.globalVars)}))(we)),xe=a(33).Link,Se=function(e){Object(_.a)(a,e);var t=Object(R.a)(a);function a(){var e;return Object(U.a)(this,a),(e=t.call(this)).handleSubmit=function(t){t.preventDefault(),e.setState({loading:!0});var a={email:e.state.email,password:e.state.password,confirmPassword:e.state.confirmPassword,handle:e.state.handle};e.props.signupUser(a,e.props.history)},e.handleChange=function(t){e.setState(Object(Ee.a)({},t.target.name,t.target.value))},e.state={email:"",password:"",confirmPassword:"",handle:"",errors:{}},e}return Object(A.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.UI.loading,n=this.state.errors;return r.a.createElement("div",{className:t.formContainer},r.a.createElement("img",{src:ve.a,alt:"AppIcon",className:t.appIcon}),r.a.createElement(q.a,{variant:"h2",className:t.pageTitle},"Signup"),r.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit,className:t.form},r.a.createElement(ye.a,{id:"email",name:"email",type:"email",label:"Email",error:!!n.email,helperText:n.email,className:t.textField,value:this.state.email,onChange:this.handleChange,fullWidth:!0}),r.a.createElement(ye.a,{id:"password",name:"password",type:"password",label:"Password",className:t.textField,value:this.state.password,error:!!n.password,helperText:n.password,onChange:this.handleChange,fullWidth:!0}),r.a.createElement(ye.a,{id:"confirmPassword",name:"confirmPassword",type:"password",label:"Confirm Password",className:t.textField,value:this.state.confirmPassword,error:!!n.confirmPassword,helperText:n.confirmPassword,onChange:this.handleChange,fullWidth:!0}),r.a.createElement(ye.a,{id:"handle",name:"handle",type:"text",label:"Handle",className:t.textField,value:this.state.handle,error:!!n.handle,helperText:n.handle,onChange:this.handleChange,fullWidth:!0}),n.general&&r.a.createElement(q.a,{className:t.customError},n.general),r.a.createElement(D.a,{type:"submit",variant:"contained",color:"primary",className:t.button,disabled:a},"Signup",a&&r.a.createElement(Oe.a,{size:25,className:t.proress})),r.a.createElement("div",null,r.a.createElement("small",null,"Already have an account ? Log in ",r.a.createElement(xe,{to:"/login"},"here")," !"))))}}],[{key:"getDerivedStateFromProps",value:function(e){if(e.UI.errors)return{errors:e.UI.errors}}}]),a}(n.Component),Ce=Object(d.b)((function(e){return{user:e.user,UI:e.UI}}),{signupUser:function(e,t){return function(a){a({type:"LOADING_UI"}),x.a.post("/signup",e).then((function(e){T(e.data.token),a({type:"CLEAR_ERRORS"}),a(S()),t.push("/homepage")})).catch((function(e){a({type:"SET_ERRORS",payload:e.response.data})}))}}})(z()((function(e){return Object(f.a)({},e.globalVars)}))(Se)),Te=u()({palette:{primary:{light:"#33c9dc",main:"#00bcd4",dark:"#008394",contrastText:"#fff"},secondary:{light:"#ff633",main:"#ff3d00",dark:"#b22a00",contrastText:"#fff"}},globalVars:{formContainer:{display:"grid",justifyContent:"center",textAlign:"center",height:"100"},form:{width:"450px",height:"200px"},pageTitle:{margin:"10px auto 10px auto"},footer:{position:"fixed",bottom:"2%",left:"42%"},footerContainer:{display:"grid",justifyContent:"center"},appIcon:{margin:"20px auto 20px auto",width:125,height:"auto"},textField:{margin:"10px auto 10px auto"},customError:{color:"red",fontSize:".8 rem"},button:{margin:"15px",position:"relative",textAlign:"center"},progress:{position:"absolute",left:"50",textAlign:"center"}}}),Ue=localStorage.FBIdToken;Ue&&(1e3*Object(p.a)(Ue).exp<Date.now()?(I.dispatch(C()),window.location.href="/login"):(I.dispatch({type:"SET_AUTHENTICATED"}),x.a.defaults.headers.common.Authorization=Ue,I.dispatch(S())));var Ae=function(){return r.a.createElement(s.a,{theme:Te},r.a.createElement(d.a,{store:I},r.a.createElement(i.BrowserRouter,null,r.a.createElement(P,null),r.a.createElement("div",{className:"container"},r.a.createElement(c.g,null,r.a.createElement(c.d,{exact:!0,path:"/homepage",component:fe}),r.a.createElement(W,{exact:!0,path:"/login",component:Ne}),r.a.createElement(W,{exact:!0,path:"/signup",component:Ce}))))))},_e=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,231)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,l=t.getTTFB;a(e),n(e),r(e),o(e),l(e)}))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ae,null)),document.getElementById("root")),_e()},67:function(e,t,a){e.exports=a.p+"static/media/appicon.a70b170b.svg"}},[[128,1,2]]]);
//# sourceMappingURL=main.e41ab8ec.chunk.js.map